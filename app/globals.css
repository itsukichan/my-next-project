@tailwind base;
@tailwind components;
@tailwind utilities;

/* View Transitions API */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

::view-transition-old(root) {
  z-index: 1;
}
::view-transition-new(root) {
  z-index: 2;
}

.dark::view-transition-old(root) {
  z-index: 2;
}
.dark::view-transition-new(root) {
  z-index: 1;
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

::view-transition-old(root) {
  animation: 400ms cubic-bezier(0.4, 0, 0.2, 1) both fade-out;
}

::view-transition-new(root) {
  animation: 400ms cubic-bezier(0.4, 0, 0.2, 1) both fade-in;
}

main {
  animation: content-fade 0.4s ease-out;
}

@keyframes content-fade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* コードブロックの基本スタイル */
pre {
  position: relative !important;
  border: 1px solid rgb(226 232 240) !important;
  border-radius: 0.5rem !important;
  margin: 1.5rem 0 !important;
  background: rgb(241 245 249) !important;
}

/* ライトモードのコードブロックスタイル */
pre code {
  display: block !important;
  background: rgb(241 245 249) !important;
  color: rgb(31 41 55) !important;
  padding: 1rem !important;
}

pre[data-filename] code {
  padding-top: 3rem !important;
}

/* コードブロックのコンテナに関するスタイル */
[data-filename] {
  position: relative !important;
  margin-bottom: 3rem !important;
  border-radius: 0.5rem !important;
  transition: all 0.2s ease-in-out !important;
}

/* ファイル名表示用のスタイル */
[data-filename]::after {
  content: attr(data-filename);
  position: absolute !important;
  right: 0rem !important;
  bottom: -2rem !important;
  font-size: 0.75rem !important;
  line-height: 1.25 !important;
  color: rgb(71 85 105) !important;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace !important;
  background-color: rgb(241 245 249) !important;
  padding: 0.25rem 0.75rem !important;
  border-radius: 0.375rem !important;
  border: 1px solid rgb(226 232 240) !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
  transition: all 0.2s ease-in-out !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  max-width: calc(100% - 2rem) !important;
}

/* ダークモード対応 */
.dark [data-filename]::after {
  color: rgb(226 232 240) !important;
  background-color: rgb(30 41 59) !important;
  border-color: rgb(51 65 85) !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
}

/* ダークモードのスタイル */
.dark pre {
  border-color: rgb(51 65 85) !important;
  background: rgb(31 41 55) !important;
}

.dark pre code {
  background: rgb(31 41 55) !important;
  color: rgb(226 232 240) !important;
}

.dark pre[data-filename]::before {
  background: rgb(15 23 42);
  color: rgb(148 163 184);
  border-bottom-color: rgb(51 65 85);
}

/* シンタックスハイライトの色調整 */
.hljs-keyword,
.hljs-selector-tag {
  color: rgb(147 51 234) !important; /* より濃い紫 */
}

.hljs-string,
.hljs-attr {
  color: rgb(21 128 61) !important; /* より濃い緑 */
}

.hljs-number,
.hljs-literal {
  color: rgb(154 52 18) !important; /* より濃いオレンジ */
}

.hljs-title,
.hljs-class,
.hljs-function {
  color: rgb(30 64 175) !important; /* より濃い青 */
}

.hljs-comment,
.hljs-quote {
  color: rgb(51 65 85) !important; /* より濃いグレー */
}

/* インラインコードのスタイル */
:not(pre) > code {
  background: rgb(226 232 240) !important;
  color: rgb(15 23 42) !important;
  padding: 0.25em 0.5em !important;
  border-radius: 0.25rem !important;
  font-size: 0.875em !important;
  border: 1px solid rgb(203 213 225) !important;
}

.dark :not(pre) > code {
  background: rgb(51 65 85) !important;
  color: rgb(241 245 249) !important;
  border-color: rgb(71 85 105) !important;
}
